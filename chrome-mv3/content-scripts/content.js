var content=(function(){"use strict";function X(t){return t}const m=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,f="webhookFirstAcceptOnly",A=!1,_="a.username",v="a.problem_title.tooltip-click.result-ac",R="status-table",D="a.show-date",y="a.problem_title",N=100,p="problemId",C="level",b="result",L="problemDescription",w="language",M="submissionId",U="username",S="submissionTime",O="runtime",$="memory",F="codeLength",H=async()=>(await m.storage.sync.get(f))[f]??A;function P(){const t=document.querySelector(_);if(!t)return null;const e=t.textContent?.trim();return e||null}function q(){return!!document.querySelector(v)}function Y(t){switch(t.toLowerCase()){case"문제번호":case"문제":case"problem":return p;case"난이도":return C;case"결과":case"result":return b;case"문제내용":return L;case"언어":case"language":return w;case"제출 번호":case"solution":return M;case"아이디":case"user":return U;case"제출시간":case"제출한 시간":case"submission time":return S;case"시간":case"time":return O;case"메모리":case"memory":return $;case"코드 길이":case"length":return F;default:return"unknown"}}function k(t){const e={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" "};return t.replace(/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160);/g,n=>e[n])}function B(){const t=document.getElementById(R);if(!t)return null;const e=Array.from(t.rows[0].cells).map(r=>r.innerText.trim()).map(Y),n=[];for(let r=1;r<t.rows.length;r++){const s=t.rows[r],a=Array.from(s.cells,(i,g)=>{switch(e[g]){case b:return{result:i.innerText,resultCategory:i.firstChild.getAttribute("data-color").replace("-eng","").trim()};case w:return k(i.innerText).replace(/\/.*$/g,"").trim();case S:const c=i.querySelector(D);return c?c.getAttribute("data-original-title"):null;case p:const T=i.querySelector(y);return T?{problemId:T.getAttribute("href").replace(/^.*\/([0-9]+)$/,"$1")}:null;default:return i.innerText.trim()}});let o={elementId:s.id};for(let i=0;i<e.length;i++)o[e[i]]=a[i];o={...o,...o.result,...o.problemId},n.push(o)}return n}function V(t){const e={"1월":"January","2월":"February","3월":"March","4월":"April","5월":"May","6월":"June","7월":"July","8월":"August","9월":"September","10월":"October","11월":"November","12월":"December"};for(let o in e)t.includes(o)&&(t=t.replace(o,e[o]));t=t.replace("년",", ").replace("일",",").replace(":",":");const n=new Date(Date.parse(t)),s=new Date().getTime()-n.getTime();return Math.floor(s/1e3)}async function J(t,e){if(q()&&await H()){e.log("Already accepted, aborted.");return}e.log("Watching judgement change...");let n=!1,r=0;const s=t.setInterval(()=>{const a=B();if(!a||a.length==0)return;const o=a[0];if(o.resultCategory==="judging"||o.resultCategory==="wait"||o.resultCategory==="compile"){n||(n=!0,r=Date.now(),e.log("Waiting for judgement..."));return}if(o.resultCategory!=="ac"){e.log("Latest submission is not AC, aborted."),clearInterval(s);return}if(V(o.submissionTime)>10){if(!n)return;const c=(Date.now()-r)/1e3;e.log(`AC! Took ${c} seconds.`)}clearInterval(s);let g=1;for(let c=1;c<a.length&&a[c].resultCategory!="ac";c++)g++;e.log(`Attempts: ${g}`),e.log("Sending webhook...")},N)}const I=!1,x=(t,...e)=>{console.log(`[BJCORD][${t}]${I}`,...e)},G=(t,...e)=>{console.error(`[BJCORD][${t}]${I}`,...e)},W=t=>({log:(...e)=>x(t,...e),error:(...e)=>G(t,...e)}),j={matches:["*://www.acmicpc.net/*","*://acmicpc.net/*"],async main(t){const e=W("content"),n=location.href;e.log("URL:",n);const r=P();if(!r){e.log("No handle found, aborted.");return}e.log("Handle:",r),["status",`user_id=${r}`,"problem_id","from_mine=1"].every(s=>n.includes(s))?(e.log("Starting..."),await J(t,e)):e.log("Not in the status page, aborted.")}};function l(t,...e){}const Q={debug:(...t)=>l(console.debug,...t),log:(...t)=>l(console.log,...t),warn:(...t)=>l(console.warn,...t),error:(...t)=>l(console.error,...t)};class h extends Event{constructor(e,n){super(h.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}static EVENT_NAME=E("wxt:locationchange")}function E(t){return`${m?.runtime?.id}:content:${t}`}function K(t){let e,n;return{run(){e==null&&(n=new URL(location.href),e=t.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new h(r,n)),n=r)},1e3))}}}class u{constructor(e,n){this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=E("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=K(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return m.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const r=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,n){const r=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const n=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const r=requestIdleCallback((...s)=>{this.signal.aborted||e(...s)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,n,r,s){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(n.startsWith("wxt:")?E(n):n,r,{...s,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Q.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:u.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const n=e.data?.type===u.SCRIPT_STARTED_MESSAGE_TYPE,r=e.data?.contentScriptName===this.contentScriptName,s=!this.receivedMessageIds.has(e.data?.messageId);return n&&r&&s}listenForNewerScripts(e){let n=!0;const r=s=>{if(this.verifyScriptStartedEvent(s)){this.receivedMessageIds.add(s.data.messageId);const a=n;if(n=!1,a&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}}function ee(){}function d(t,...e){}const z={debug:(...t)=>d(console.debug,...t),log:(...t)=>d(console.log,...t),warn:(...t)=>d(console.warn,...t),error:(...t)=>d(console.error,...t)};return(async()=>{try{const{main:t,...e}=j,n=new u("content",e);return await t(n)}catch(t){throw z.error('The content script "content" crashed on startup!',t),t}})()})();
content;